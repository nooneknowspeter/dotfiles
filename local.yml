---
- name: dotfiles
  hosts: localhost
  connection: localhost
  become: true

  pre_tasks:
    - name: clone dotfiles
      ansible.builtin.git: 
        repo: git@github.com/nooneknowspeter/dotfiles.git
        dest: ~/dotfiles
        recursive: true

  tasks:
    - name: update system | arch
      ansible.builtin.import_playbook: .anisble/playbooks/test.yml
      when: ansible_facts['os_family'] == "Archlinux"

    - name: update system | debian
      shell: echo "updating system"
      when: ansible_facts['os_family'] == "Debian"

    - name: update system | nixos
      shell: echo "updating system"
      when: ansible_distribution == "NixOS"

    - name: update system | windows
      shell: echo "updating system"
      when: ansible_facts['os_family'] == "Windows"
